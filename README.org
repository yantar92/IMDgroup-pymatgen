# -*- after-save-hook: (org-md-export-to-markdown); -*-
#+options: toc:nil
* IMDgroup-pymatgen

This is a set of add-ons and helper for [[https://pymatgen.org/][pymatgen]], that are tailored to
research in [[https://www.oimalyi.org/][Inverse Materials Design group]].

* Installation

#+begin_src bash
  # Download the package and source dependencies
  git clone https://git.sr.ht/~yantar92/IMDgroup-pymatgen

  # Activate virtual environment
  pip -m venv .venv
  . .venv/bin/activate

  # Install into the environment
  pip install IMDgroup-pymatgen
#+end_src

* Features

- Generate all possible unique insertion sites of an atom or molecule
  into a given structure.
- VASP input set optimized for cellulose relaxation.
  See Yadav, Malyi 2024 Cellulose (doi: [[https://doi.org/10.1007/s10570-024-05754-7][10.1007/s10570-024-05754-7]])

* Usage

** Loading VASP input sets from group publications

From Python

#+begin_src python
  from IMDgroup.pymatgen.io.vasp.sets import IMDRelaxCellulose

  # Create VASP input file generator, using default Cellulose ibeta
  # structure from Yadav, Malyi 2024 Cellulose
  input = IMDRelaxCellulose(structure='ibeta')

  # Write VASP input files into "test" directory
  input.write_input(output_dir='test', potcar_spec=True)
#+end_src

** Inserting molecule into a given structure

From command line

#+begin_src bash
  # Generate all possible inserts of water into cellulose_ibeta and
  # write VASP input files into output_dir
  pmg-insert-molecule water.xyz cellulose_ibeta.cif output_dir
#+end_src

From Python

#+begin_src python
  from IMDgroup.pymatgen.transformations.insert_molecule\
      import InsertMoleculeTransformation
  from IMDgroup.pymatgen.io.vasp.sets import IMDRelaxCellulose
  import pymatgen.io.vasp.sets as vaspset
  import numpy as np

  transformer = InsertMoleculeTransformation(
      'water.xyz', step=2.0,
      anglestep=np.radians(90),
      matcher=None)

  structures = transformer.all_inserts('cellulose_ibeta.cif')

  vaspset.batch_write_input(
      structures,
      vasp_input_set=IMDRelaxCellulose,
      output_dir='output_dir',
      potcar_spec=True)
#+end_src

* TODO Citing

* Contributing

We welcome contributions in all forms. If you want to contribute,
please fork this repository, make changes and send us a pull request!

